@import 'tailwindcss';

/* Tailwind v4 Theme Extension - Map CSS custom properties to Tailwind utilities */
@theme {
  /* Primary colors */
  --color-monarch-orange: var(--monarch-orange);
  --color-monarch-orange-hover: var(--monarch-orange-hover);
  --color-monarch-orange-disabled: var(--monarch-orange-disabled);
  --color-monarch-orange-light: var(--monarch-orange-light);

  /* Text colors */
  --color-monarch-text-dark: var(--monarch-text-dark);
  --color-monarch-text-muted: var(--monarch-text-muted);
  --color-monarch-text-light: var(--monarch-text-light);

  /* Background colors */
  --color-monarch-bg-page: var(--monarch-bg-page);
  --color-monarch-bg-card: var(--monarch-bg-card);
  --color-monarch-bg-hover: var(--monarch-bg-hover);
  --color-monarch-bg-input: var(--monarch-bg-input);
  --color-monarch-bg-elevated: var(--monarch-bg-elevated);

  /* Tooltip colors */
  --color-monarch-tooltip-bg: var(--monarch-tooltip-bg);
  --color-monarch-tooltip-text: var(--monarch-tooltip-text);

  /* Border colors */
  --color-monarch-border: var(--monarch-border);
  --color-monarch-border-light: var(--monarch-border-light);

  /* Status colors */
  --color-monarch-success: var(--monarch-success);
  --color-monarch-success-bg: var(--monarch-success-bg);
  --color-monarch-error: var(--monarch-error);
  --color-monarch-error-bg: var(--monarch-error-bg);
  --color-monarch-warning: var(--monarch-warning);
  --color-monarch-warning-bg: var(--monarch-warning-bg);
  --color-monarch-info: var(--monarch-info);
  --color-monarch-info-bg: var(--monarch-info-bg);

  /* ============================================================================
     Z-Index Hierarchy
     ============================================================================
     Semantic z-index values for consistent stacking order.
     Use these instead of arbitrary z-index values (z-10, z-50, z-[100], etc.)

     Hierarchy (lowest to highest):
     - dropdown (10): Dropdown menus, select menus
     - sticky (20): Sticky headers, navigation
     - popover (30): Popovers, config panels
     - modal-backdrop (40): Modal/dialog backdrops
     - modal (50): Modal/dialog content
     - toast (60): Toast notifications
     - tooltip (70): Tooltips (highest, always visible)

     Usage:
     - Tailwind utility classes: z-dropdown, z-sticky, z-popover, z-modal-backdrop, z-modal, z-toast, z-tooltip
     - CSS variable syntax: z-(--z-index-modal)
     - Inline styles: zIndex: Z_INDEX.MODAL (import from constants)
     ============================================================================ */

  /* CSS custom properties for inline styles and CSS classes */
  --z-index-dropdown: 10;
  --z-index-sticky: 20;
  --z-index-popover: 30;
  --z-index-modal-backdrop: 40;
  --z-index-modal: 50;
  --z-index-toast: 60;
  --z-index-tooltip: 70;

  /* Tailwind z-index utilities (creates z-dropdown, z-sticky, etc. classes) */
  --z-dropdown: 10;
  --z-sticky: 20;
  --z-popover: 30;
  --z-modal-backdrop: 40;
  --z-modal: 50;
  --z-toast: 60;
  --z-tooltip: 70;

  /* Modal dimensions */
  --modal-max-height: min(85vh, 700px);

  /* Font family - Plus Jakarta Sans as default */
  --font-sans:
    'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    sans-serif;

  /* Custom breakpoints */
  --breakpoint-xs: 480px;
}

/* Plus Jakarta Sans Font for Body */
@font-face {
  font-family: 'Plus Jakarta Sans';
  src: url('/fonts/PlusJakartaSans-VariableFont_wght.ttf') format('truetype');
  font-weight: 200 800;
  font-style: normal;
  font-display: swap;
}

/* Figtree Font for Headers */
@font-face {
  font-family: 'Figtree';
  src: url('/fonts/Figtree-VariableFont_wght.ttf') format('truetype');
  font-weight: 300 900;
  font-style: normal;
  font-display: swap;
}

/* Unbounded Font for Logo */
@font-face {
  font-family: 'Unbounded';
  src: url('/fonts/Unbounded-VariableFont_wght.ttf') format('truetype');
  font-weight: 200 900;
  font-style: normal;
  font-display: swap;
}

/* Monarch Money Color Scheme */
:root {
  /* Primary colors */
  --monarch-orange: #ff692d;
  --monarch-orange-hover: #eb5519;
  --monarch-orange-disabled: #cc5424;
  --monarch-orange-light: #fff4f0;

  /* Text colors */
  --monarch-text-dark: #22201d;
  --monarch-text-muted: #7e7b78;
  --monarch-text-light: #888888;

  /* Background colors */
  --monarch-bg-page: #f5f5f4;
  --monarch-bg-card: #ffffff;
  --monarch-bg-hover: #fafaf9;
  --monarch-bg-input: #ffffff;
  --monarch-bg-elevated: #ffffff;

  /* Tooltip colors - warm dark background for light mode (stone-800/stone-50) */
  --monarch-tooltip-bg: #292524;
  --monarch-tooltip-text: #fafaf9;
  --monarch-tooltip-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --monarch-tooltip-input-bg: #1f1e1d;
  --monarch-tooltip-border: #3d3b39;

  /* Border colors */
  --monarch-border: #e8e6e3;
  --monarch-border-light: #f0efed;

  /* Status colors */
  --monarch-success: #22a06b;
  --monarch-success-bg: #dcfce7;
  --monarch-error: #dc2626;
  --monarch-error-bg: #fef2f2;
  --monarch-warning: #f59e0b;
  --monarch-warning-bg: #fef3c7;
  --monarch-info: #3b82f6;
  --monarch-info-bg: #eff6ff;

  /* Status color aliases (for semantic clarity in different contexts) */
  --monarch-green: var(--monarch-success);
  --monarch-red: var(--monarch-error);

  /* Accent color (purple - used for beta badges, special features) */
  --monarch-accent: #8b5cf6;
  --monarch-accent-bg: rgba(139, 92, 246, 0.15);

  /* Font */
  --monarch-font:
    'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    sans-serif;

  /* App icon */
  --app-icon-bg: #1a1a2e;
  --app-icon-border: transparent;

  /* ============================================================================
     Animation System
     ============================================================================
     Centralized timing values that match constants/index.ts UI.ANIMATION.
     Use these CSS variables for consistent animation timing across the app.
     ============================================================================ */

  /* Animation durations - matches UI.ANIMATION in constants/index.ts */
  --animation-fast: 150ms;
  --animation-normal: 200ms;
  --animation-slow: 300ms;

  /* Easing curves for different animation types */
  --ease-out-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* List stagger delay */
  --stagger-delay: 25ms;

  /* ============================================================================
     Stash Card Overlay System
     ============================================================================
     Semi-transparent overlays that appear on hover over stash card images.
     These need to work on top of any image, so they use dark backgrounds
     with light text for universal contrast.
     ============================================================================ */

  /* Overlay backgrounds - semi-transparent dark for hover, tinted for modes */
  --overlay-bg: rgba(0, 0, 0, 0.85);
  --overlay-distribute-bg: rgba(20, 120, 60, 0.92);
  --overlay-hypothesize-bg: rgba(40, 10, 70, 0.95);

  /* Overlay text colors */
  --overlay-text: rgba(255, 255, 255, 0.95);
  --overlay-text-muted: rgba(255, 255, 255, 0.6);

  /* Overlay input styling */
  --overlay-input-bg: rgba(255, 255, 255, 0.1);
  --overlay-input-text: rgba(255, 255, 255, 0.95);
  --overlay-divider: rgba(255, 255, 255, 0.2);

  /* Overlay button styling */
  --overlay-btn-bg: rgba(255, 255, 255, 0.1);
  --overlay-btn-text: rgba(255, 255, 255, 0.7);
  --overlay-btn-bg-active-stash: rgba(34, 197, 94, 0.2);
  --overlay-btn-bg-active-take: rgba(249, 115, 22, 0.2);
  --overlay-btn-text-stash: #22c55e;
  --overlay-btn-text-take: #f97316;

  /* Card badges and buttons (sit on top of images, need dark bg for contrast) */
  --card-badge-bg: rgba(0, 0, 0, 0.7);
  --card-badge-text: rgba(255, 255, 255, 0.9);
  --card-edit-btn-bg: rgba(0, 0, 0, 0.5);
  --card-edit-btn-icon: #ffffff;

  /* ============================================================================
     Distribution Mode Styling
     ============================================================================ */

  /* Distribute mode (green) */
  --distribute-btn-icon: #4ade80;
  --distribute-input-bg: rgba(34, 197, 94, 0.15);
  --distribute-input-border: rgba(34, 197, 94, 0.5);

  /* Hypothesize mode (purple) */
  --hypothesize-btn-icon: #c084fc;
  --hypothesize-input-bg: rgba(147, 51, 234, 0.15);
  --hypothesize-input-border: rgba(147, 51, 234, 0.5);
  --hypothesize-input-text: #9333ea;

  /* ============================================================================
     Additional Color Aliases
     ============================================================================ */

  /* Primary action color (brand orange) */
  --monarch-primary: var(--monarch-orange);
  --monarch-primary-hover: var(--monarch-orange-hover);

  /* Teal - used for secondary actions, success states in forms */
  --monarch-teal: #14b8a6;
  --monarch-teal-light: rgba(20, 184, 166, 0.15);

  /* Blue - used for info, links */
  --monarch-blue: #3b82f6;

  /* Tint - accent color for buttons (same as teal) */
  --monarch-tint: #14b8a6;

  /* Text alias */
  --monarch-text: var(--monarch-text-dark);

  /* Orange background for alerts/warnings */
  --monarch-orange-bg: var(--monarch-orange-light);

  /* Muted accent for subtle highlights */
  --monarch-accent-muted: rgba(139, 92, 246, 0.5);

  /* Status icon colors (may differ from text for contrast) */
  --status-icon-positive: var(--monarch-success);
  --status-icon-negative: var(--monarch-error);

  /* Tool page header icon color */
  --tool-header-icon: var(--monarch-orange);

  /* Logo font family */
  --font-logo: 'Unbounded', sans-serif;
}

/* Dark Mode */
.dark {
  /* Primary colors - slightly lighter for dark backgrounds */
  --monarch-orange: #ff8050;
  --monarch-orange-hover: #ff6a30;
  --monarch-orange-disabled: #995030;
  --monarch-orange-light: #3d2a22;

  /* Text colors - inverted */
  --monarch-text-dark: #f5f5f4;
  --monarch-text-muted: #a8a5a0;
  --monarch-text-light: #888888;

  /* Background colors - dark palette */
  --monarch-bg-page: #1a1918;
  --monarch-bg-card: #262524;
  --monarch-bg-hover: #302f2d;
  --monarch-bg-input: #1f1e1d;
  --monarch-bg-elevated: #333231;

  /* Tooltip colors - darker than page bg (#1a1918) with good text contrast */
  --monarch-tooltip-bg: #171615;
  --monarch-tooltip-text: #e0dedb;
  --monarch-tooltip-shadow: 0 4px 10px rgba(0, 0, 0, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.04);
  --monarch-tooltip-input-bg: #0f0e0d;
  --monarch-tooltip-border: #2a2928;

  /* Border colors - subtle for dark mode */
  --monarch-border: #3d3b39;
  --monarch-border-light: #2d2c2a;

  /* Status colors - adjusted for dark backgrounds */
  --monarch-success: #34d399;
  --monarch-success-bg: rgba(34, 211, 153, 0.15);
  --monarch-success-bg-solid: #1a3d2e;
  --monarch-error: #f87171;
  --monarch-error-bg: rgba(248, 113, 113, 0.15);
  --monarch-error-bg-solid: #3d1a1a;
  --monarch-warning: #fbbf24;
  --monarch-warning-bg: rgba(251, 191, 36, 0.15);
  --monarch-warning-bg-solid: #3d351a;
  --monarch-info: #60a5fa;
  --monarch-info-bg: rgba(96, 165, 250, 0.15);
  --monarch-info-bg-solid: #1a2a3d;

  /* Status color aliases (for semantic clarity in different contexts) */
  --monarch-green: var(--monarch-success);
  --monarch-red: var(--monarch-error);

  /* Accent color (purple - used for beta badges, special features) */
  --monarch-accent: #a78bfa;
  --monarch-accent-bg: rgba(167, 139, 250, 0.15);

  /* App icon - warm tone matching dark palette */
  --app-icon-bg: #2d2b29;
  --app-icon-border: #444240;

  /* Stash card overlay - same as light mode since overlays are always dark */
  --overlay-bg: rgba(0, 0, 0, 0.85);
  --overlay-distribute-bg: rgba(20, 120, 60, 0.92);
  --overlay-hypothesize-bg: rgba(40, 10, 70, 0.95);
  --overlay-text: rgba(255, 255, 255, 0.95);
  --overlay-text-muted: rgba(255, 255, 255, 0.6);
  --overlay-input-bg: rgba(255, 255, 255, 0.1);
  --overlay-input-text: rgba(255, 255, 255, 0.95);
  --overlay-divider: rgba(255, 255, 255, 0.2);
  --overlay-btn-bg: rgba(255, 255, 255, 0.1);
  --overlay-btn-text: rgba(255, 255, 255, 0.7);
  --overlay-btn-bg-active-stash: rgba(34, 197, 94, 0.2);
  --overlay-btn-bg-active-take: rgba(249, 115, 22, 0.2);
  --overlay-btn-text-stash: #4ade80;
  --overlay-btn-text-take: #fb923c;

  /* Card badges and buttons (same as light mode - overlays are always dark) */
  --card-badge-bg: rgba(0, 0, 0, 0.7);
  --card-badge-text: rgba(255, 255, 255, 0.9);
  --card-edit-btn-bg: rgba(0, 0, 0, 0.5);
  --card-edit-btn-icon: #ffffff;

  /* Distribute mode (green - brighter for dark mode) */
  --distribute-btn-icon: #4ade80;
  --distribute-input-bg: rgba(34, 197, 94, 0.2);
  --distribute-input-border: rgba(34, 197, 94, 0.6);

  /* Hypothesize mode (purple - brighter for dark mode) */
  --hypothesize-btn-icon: #d8b4fe;
  --hypothesize-input-bg: rgba(147, 51, 234, 0.2);
  --hypothesize-input-border: rgba(147, 51, 234, 0.6);
  --hypothesize-input-text: #c084fc;

  /* Primary action color */
  --monarch-primary: var(--monarch-orange);
  --monarch-primary-hover: var(--monarch-orange-hover);

  /* Teal - brighter for dark backgrounds */
  --monarch-teal: #2dd4bf;
  --monarch-teal-light: rgba(45, 212, 191, 0.2);

  /* Blue */
  --monarch-blue: #60a5fa;

  /* Tint */
  --monarch-tint: #2dd4bf;

  /* Text alias */
  --monarch-text: var(--monarch-text-dark);

  /* Orange background */
  --monarch-orange-bg: var(--monarch-orange-light);

  /* Muted accent */
  --monarch-accent-muted: rgba(167, 139, 250, 0.5);

  /* Status icon colors */
  --status-icon-positive: var(--monarch-success);
  --status-icon-negative: var(--monarch-error);

  /* Tool page header icon */
  --tool-header-icon: var(--monarch-orange);

  /* Logo font */
  --font-logo: 'Unbounded', sans-serif;
}

html.dark {
  color-scheme: dark;
}

/* Base styles */
html,
body {
  height: 100%;
  margin: 0;
}

/* Prevent page scrolling for app layout (app has internal scroll containers).
   Marketing pages need normal page scrolling, so only apply when app is present. */
html:has(.app-layout) {
  overflow: hidden;
}

body {
  font-family: var(--monarch-font);
  color: var(--monarch-text-dark);
  background-color: var(--monarch-bg-page);
}

/* Tooltip shadow utility - adapts to light/dark mode */
.shadow-tooltip {
  box-shadow: var(--monarch-tooltip-shadow);
}

/* Thin scrollbar styling - scoped to app only, not marketing pages */
.app-layout,
.app-layout * {
  scrollbar-width: thin;
  scrollbar-color: var(--monarch-border) transparent;
}

.app-layout ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.app-layout ::-webkit-scrollbar-track {
  background: transparent;
}

.app-layout ::-webkit-scrollbar-thumb {
  background: var(--monarch-border);
  border-radius: 4px;
}

.app-layout ::-webkit-scrollbar-thumb:hover {
  background: var(--monarch-text-muted);
}

/* Scrollbar styling for modals (portaled outside .app-layout) */
dialog,
dialog *,
.modal-content,
.modal-content * {
  scrollbar-width: thin;
  scrollbar-color: var(--monarch-border) transparent;
}

dialog ::-webkit-scrollbar,
.modal-content ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

dialog ::-webkit-scrollbar-track,
.modal-content ::-webkit-scrollbar-track {
  background: var(--monarch-bg-page);
  border-radius: 4px;
}

dialog ::-webkit-scrollbar-thumb,
.modal-content ::-webkit-scrollbar-thumb {
  background: var(--monarch-border);
  border-radius: 4px;
}

dialog ::-webkit-scrollbar-thumb:hover,
.modal-content ::-webkit-scrollbar-thumb:hover {
  background: var(--monarch-text-muted);
}

/* Modal body scrollbar - always visible on macOS */
.modal-body-scroll {
  scrollbar-width: thin !important;
  scrollbar-color: var(--monarch-border) var(--monarch-border-light, rgba(128, 128, 128, 0.2)) !important;
  scrollbar-gutter: stable !important;
}

.modal-body-scroll::-webkit-scrollbar {
  width: 10px !important;
  height: 10px !important;
  -webkit-appearance: none !important;
  display: block !important;
}

.modal-body-scroll::-webkit-scrollbar-track {
  background: rgba(128, 128, 128, 0.15) !important;
  border-radius: 5px !important;
}

.modal-body-scroll::-webkit-scrollbar-thumb {
  background: var(--monarch-border) !important;
  border-radius: 5px !important;
  border: 2px solid transparent !important;
  background-clip: content-box !important;
}

.modal-body-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--monarch-text-muted) !important;
  background-clip: content-box !important;
}

/* Utility class for custom scrollbars anywhere */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: var(--monarch-border) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: var(--monarch-border);
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--monarch-text-muted);
}

/* Headings - Figtree */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: 'Figtree', var(--monarch-font);
}

/* Focus ring for interactive elements only (not containers/divs) */
button:focus-visible,
a:focus-visible,
[role='button']:focus-visible,
[role='link']:focus-visible,
[role='menuitem']:focus-visible,
[role='tab']:focus-visible,
[role='option']:focus-visible,
[tabindex]:focus-visible:not([tabindex='-1']) {
  outline: 2px solid var(--monarch-orange);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(255, 105, 45, 0.2);
}

/* Form elements */
input:focus,
select:focus,
textarea:focus {
  outline: none;
  box-shadow: none !important;
}

/* Override for white focus ring */
input.focus-white:focus {
  border-color: white !important;
  box-shadow: 0 0 0 3px white !important;
}

/* Suppress focus styles (for inputs where parent handles focus) */
input.focus-none:focus {
  border-color: transparent !important;
  box-shadow: none !important;
}

/* Checkbox and radio focus styles */
input[type='checkbox']:focus-visible,
input[type='radio']:focus-visible {
  outline: none;
}

/* Checkbox accent color */
input[type='checkbox'],
input[type='radio'] {
  accent-color: var(--monarch-orange);
}

/* Skip to main content link (visually hidden until focused) */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--monarch-orange);
  color: white;
  padding: 8px 16px;
  z-index: calc(var(--z-index-tooltip) + 100);
  text-decoration: none;
  font-weight: 600;
  border-radius: 0 0 4px 0;
}

.skip-link:focus-visible {
  top: 0;
}

/* Screen reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Live region for announcements */
.live-region {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* App Header */
.app-header {
  background-color: var(--monarch-bg-card);
  border-bottom: 1px solid var(--monarch-border);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-index-sticky);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.15),
    0 1px 3px rgba(0, 0, 0, 0.1);
  /* Enable window dragging on macOS Electron */
  -webkit-app-region: drag;
}

/* Disable drag on interactive elements within header */
.app-header a,
.app-header button,
.app-header input,
.app-header [role='button'] {
  -webkit-app-region: no-drag;
}

/**
 * Persistent drag region for Electron (macOS and Windows).
 * Allows window dragging even when modals cover the header.
 * Sits at the very top edge of the window, above all content.
 * On Windows, the component applies right: 150px inline to avoid window controls.
 */
.macos-drag-region {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 20px;
  z-index: 9999;
  -webkit-app-region: drag;
  background: transparent;
}

.app-header-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0.625rem 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 52px;
}

.app-brand {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
}

.app-logo {
  width: 1.25rem;
  height: 1.25rem;
  color: var(--monarch-orange);
  stroke-width: 2.5;
  animation: spin-once 0.5s ease-out;
}

@keyframes spin-once {
  from {
    transform: rotate(-180deg);
    opacity: 0;
  }
  to {
    transform: rotate(0deg);
    opacity: 1;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.app-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--monarch-orange);
  margin: 0;
  letter-spacing: -0.025em;
}

.coffee-link {
  display: flex;
  align-items: center;
  transition:
    transform 0.15s ease,
    opacity 0.15s ease;
}

.coffee-link:hover {
  transform: translateY(-1px);
  opacity: 0.9;
}

.coffee-button {
  height: 36px;
  width: auto;
  border-radius: 0.375rem;
}

/* Header Action Buttons */
.app-header-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
  justify-content: flex-end;
}

.app-header-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  padding: 0.5rem;
  border-radius: 0.5rem;
  transition: all 0.15s ease;
  background: transparent;
  border: none;
  cursor: pointer;
  min-width: 36px;
  min-height: 36px;
}

.app-header-btn:hover {
  background-color: var(--monarch-bg-hover);
  color: var(--monarch-text-dark);
}

/* Standardized header icon sizing */
.app-header-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.app-header-signout {
  color: var(--monarch-text-muted);
  padding: 0.5rem 0.75rem;
  min-width: auto;
}

.app-header-signout:hover {
  color: var(--monarch-error);
  background-color: var(--monarch-error-bg);
}

/* App Layout - Fixed header with scrolling content and footer */
.app-layout {
  /* Base header height: 52px min-height + 10px padding + 1px border + 2px buffer.
     The buffer prevents notification banners from being clipped by box-shadow.
     This may be overridden for macOS Electron (73px) to account for traffic lights.
     See AppShell.tsx for platform-specific adjustments. */
  --header-height: 55px;
  --rate-limit-banner-height: 40px;
  --footer-height: 45px; /* Match .app-footer height */
  height: 100vh;
  padding-top: var(--header-height);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

/* When rate limit banner is visible inside header, increase effective header height */
.app-layout:has(.app-header .rate-limit-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height));
}

.app-layout:has(.app-header .rate-limit-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) - var(--footer-height)
  );
}

/* When offline banner is visible inside header, increase effective header height */
.app-layout:has(.app-header .offline-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height));
}

.app-layout:has(.app-header .offline-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) - var(--footer-height)
  );
}

/* When both rate-limit and offline banners are visible */
.app-layout:has(.app-header .rate-limit-banner):has(.app-header .offline-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height) * 2);
}

.app-layout:has(.app-header .rate-limit-banner):has(.app-header .offline-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) * 2 - var(--footer-height)
  );
}

/* When update banner is visible inside header */
.app-layout:has(.app-header .update-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height));
}

.app-layout:has(.app-header .update-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) - var(--footer-height)
  );
}

/* When desktop update banner is visible inside header */
.app-layout:has(.app-header .desktop-update-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height));
}

.app-layout:has(.app-header .desktop-update-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) - var(--footer-height)
  );
}

/* When month transition banner is visible inside header */
.app-layout:has(.app-header .month-transition-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height));
}

.app-layout:has(.app-header .month-transition-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) - var(--footer-height)
  );
}

/* When distribution mode banner is visible inside header */
.app-layout:has(.app-header .distribution-mode-banner) {
  padding-top: calc(var(--header-height) + var(--rate-limit-banner-height));
}

.app-layout:has(.app-header .distribution-mode-banner) .sidebar-nav {
  max-height: calc(
    100vh - var(--header-height) - var(--rate-limit-banner-height) - var(--footer-height)
  );
}

.app-scroll-area {
  flex: 1;
  overflow-y: auto;
  min-height: 0; /* Allow flex children to shrink below content size */
  /* Prevent scrollbar from extending behind fixed footer */
  scrollbar-gutter: stable;
}

.app-body {
  display: flex;
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;
}

.app-content-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
}

.app-main {
  flex: 1;
  padding: 1.5rem;
  min-width: 0;
}

/* Sidebar Navigation */
.sidebar-nav {
  width: 220px;
  flex-shrink: 0;
  padding: 1.5rem 0.75rem;
  background-color: transparent;
  display: flex;
  flex-direction: column;
  height: fit-content;
  max-height: calc(100vh - var(--header-height) - var(--footer-height));
  overflow-y: auto;
  position: sticky;
  top: 0; /* Sticky within scroll area which already accounts for header */
  align-self: flex-start;
}

/* Desktop: wrapper elements are transparent */
.sidebar-nav-tools {
  display: contents;
}

.sidebar-nav-mobile-separator {
  display: none;
}

.sidebar-nav-settings {
  display: contents;
}

.sidebar-nav-sections {
  flex: 1;
}

.sidebar-nav-footer {
  margin-top: auto;
}

/* Sidebar logo - desktop app only */
.sidebar-logo {
  padding: 0.5rem 0.75rem 1rem;
  margin-bottom: 0.5rem;
}

.sidebar-logo-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: var(--monarch-text-dark);
  transition: opacity var(--animation-fast);
}

.sidebar-logo-link:hover {
  opacity: 0.8;
}

.sidebar-logo-text {
  font-family: 'Unbounded', sans-serif;
  font-weight: 600;
  font-size: 1.125rem;
}

/* Sidebar version indicator - desktop app only */
.sidebar-version {
  padding: 0.5rem 0.75rem;
  margin-bottom: 0.5rem;
}

.sidebar-lock {
  width: 100%;
  background: none;
  border: none;
  cursor: pointer;
}

.sidebar-nav-section {
  margin-bottom: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.sidebar-nav-section:last-child {
  margin-bottom: 0;
}

.sidebar-nav-divider {
  height: 1px;
  background-color: var(--monarch-border);
  margin: 0 0.875rem 1rem;
}

.sidebar-nav-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 0.5rem 0.5rem 0.875rem;
}

.sidebar-nav-header-row .sidebar-nav-header {
  padding: 0;
}

.sidebar-nav-header {
  font-size: 0.625rem;
  font-weight: 600;
  letter-spacing: 0.1em;
  color: var(--monarch-text-muted);
  padding: 0 0.875rem 0.5rem;
}

.sidebar-suggest-dropdown {
  position: relative;
}

.sidebar-suggest-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.625rem;
  font-weight: 500;
  color: var(--monarch-text-muted);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  transition: all 0.15s ease;
}

.sidebar-suggest-btn:hover {
  color: var(--monarch-text-dark);
  background: var(--monarch-bg-card);
}

.sidebar-idea-menu {
  position: absolute;
  min-width: 180px;
  background: var(--monarch-bg-card);
  border: 1px solid var(--monarch-border);
  border-radius: 8px;
  padding: 0.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: var(--z-index-tooltip);
}

.sidebar-idea-option {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.625rem 0.75rem;
  color: var(--monarch-text-dark);
  text-decoration: none;
  border-radius: 6px;
  font-size: 0.875rem;
  white-space: nowrap;
  cursor: pointer;
  transition:
    background-color 0.15s ease,
    color 0.15s ease;
}

.sidebar-idea-option:hover {
  background: var(--monarch-orange-light);
  color: var(--monarch-orange);
}

.sidebar-idea-option:active {
  background: var(--monarch-orange-light);
  color: var(--monarch-orange-hover);
}

.sidebar-suggest-dropdown .sidebar-idea-menu {
  bottom: auto;
  top: 100%;
  left: auto;
  right: 0;
  margin-top: 0.25rem;
}

.sidebar-nav-list {
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.sidebar-nav-item {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  padding: 0.625rem 0.875rem;
  border-radius: 0.625rem;
  color: var(--monarch-text-muted);
  text-decoration: none;
  transition: all 0.15s ease;
  font-weight: 500;
  font-size: 0.8125rem;
}

.sidebar-nav-item:hover {
  background-color: var(--monarch-bg-card);
  color: var(--monarch-text-dark);
}

.sidebar-nav-item-active {
  background-color: var(--monarch-bg-card);
  color: var(--monarch-orange);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.sidebar-nav-item-active:hover {
  background-color: var(--monarch-bg-card);
  color: var(--monarch-orange);
}

.sidebar-nav-item-disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.sidebar-nav-item-disabled:hover {
  background-color: transparent;
  color: var(--monarch-text-muted);
}

.sidebar-nav-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
}

.sidebar-nav-label {
  white-space: nowrap;
}

/* Mobile-only elements - hidden on desktop */
.sidebar-mobile-only {
  display: none;
}

/* Sidebar nav item with settings cog */
.sidebar-nav-item-with-settings {
  position: relative;
}

.sidebar-settings-cog {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 0.375rem;
  background: transparent;
  border: none;
  color: var(--monarch-text-muted);
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
  margin-left: auto;
}

.sidebar-nav-item:hover .sidebar-settings-cog,
.sidebar-nav-item-active .sidebar-settings-cog {
  opacity: 1;
}

.sidebar-settings-cog:hover {
  color: var(--monarch-orange);
  background-color: rgba(0, 0, 0, 0.05);
}

/* Settings expandable section in sidebar */
.sidebar-settings-expandable {
  display: flex;
  flex-direction: column;
}

/* Nested settings submenu */
.sidebar-settings-submenu {
  list-style: none;
  margin: 0;
  padding: 0.25rem 0 0.25rem 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
  border-left: 1px solid var(--monarch-border);
  margin-left: 1.5rem;
}

.sidebar-settings-submenu-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.375rem 0.625rem;
  border: none;
  border-radius: 0.375rem;
  background: transparent;
  color: var(--monarch-text-muted);
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.sidebar-settings-submenu-item:hover {
  background-color: var(--monarch-bg-card);
  color: var(--monarch-text-dark);
}

.sidebar-settings-submenu-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.sidebar-settings-submenu-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Toolkit wrapper - desktop: transparent, mobile: scrollable */
.sidebar-toolkit-wrapper {
  display: contents;
}

/* Settings Page Layout */
.settings-page {
  display: block;
}

.settings-content {
  max-width: 640px;
  min-width: 0;
}

/* Scroll offset for settings sections to account for fixed header */
.settings-content > [id] {
  scroll-margin-top: calc(var(--header-height) + 1.5rem);
}

/* Full width on smaller screens */
@media (max-width: 1023px) {
  .settings-content {
    max-width: 100%;
  }
}

/* App Footer */
.app-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-top: 1px solid var(--monarch-border);
  background-color: var(--monarch-bg-card);
  flex-shrink: 0; /* Don't shrink footer */
  position: relative;
  z-index: 20; /* Above vignette gradient (z-10) */
}

.app-footer-link {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.75rem;
  transition: color 0.15s ease;
}

.app-footer-link:hover {
  color: var(--monarch-text-dark);
}

/* Mobile: Sidebar becomes bottom nav */
@media (max-width: 767px) {
  .app-layout {
    --footer-height: 0px; /* Footer hidden on mobile */
    padding-bottom: 4.5rem; /* Space for mobile bottom nav instead */
  }

  .app-body {
    flex-direction: column;
  }

  .sidebar-nav {
    order: 1;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 0.5rem;
    height: auto;
    padding: 0.5rem 1rem;
    position: fixed;
    top: auto; /* Reset desktop sticky top positioning */
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-index-modal);
    background-color: var(--monarch-bg-card);
    border-top: 1px solid var(--monarch-border);
    box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.04);
  }

  .sidebar-nav-header,
  .sidebar-nav-header-row,
  .sidebar-nav-divider {
    display: none;
  }

  .sidebar-nav-tools {
    display: contents; /* Flatten structure so items lay out directly in nav */
  }

  .sidebar-nav-sections {
    display: contents; /* Flatten structure */
  }

  .sidebar-nav-footer {
    margin-top: 0;
    padding-top: 0;
    border-top: none;
    display: contents;
  }

  .sidebar-nav-section {
    margin-bottom: 0;
    display: contents;
  }

  .sidebar-nav-list {
    flex-direction: row;
    gap: 0.5rem;
    flex-shrink: 0; /* Keep main nav items from shrinking */
  }

  .sidebar-nav-mobile-separator {
    display: block;
    width: 1px;
    height: 2.5rem;
    background-color: var(--monarch-border);
    flex-shrink: 0;
    align-self: center;
  }

  .sidebar-nav-settings {
    flex-shrink: 0;
    display: flex;
    flex-direction: row;
  }

  .sidebar-nav-item {
    flex-direction: column;
    gap: 0.25rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    flex-shrink: 0;
  }

  .sidebar-nav-item:hover {
    background-color: var(--monarch-bg-hover);
  }

  .sidebar-nav-item-active {
    background-color: var(--monarch-orange-light);
    box-shadow: none;
  }

  .sidebar-nav-label {
    font-size: 0.6875rem;
  }

  .sidebar-desktop-only {
    display: none !important;
  }

  .sidebar-mobile-only {
    display: list-item;
  }

  .sidebar-suggest-dropdown {
    display: none !important;
  }

  .sidebar-settings-cog {
    display: none !important;
  }

  /* Toolkit items - scrollable with vignette fade */
  .sidebar-toolkit-wrapper {
    position: relative;
    display: flex;
    flex-shrink: 1;
    min-width: 0;
    overflow: hidden;
  }

  .sidebar-toolkit-wrapper::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 24px;
    background: linear-gradient(to right, transparent, var(--monarch-bg-card));
    pointer-events: none;
    z-index: 1;
  }

  .sidebar-toolkit-wrapper .sidebar-nav-list {
    flex-shrink: 1;
    overflow-x: auto;
    overflow-y: hidden;
    scrollbar-width: none;
    -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
    padding-right: 16px; /* Space for vignette */
  }

  .sidebar-toolkit-wrapper .sidebar-nav-list::-webkit-scrollbar {
    display: none;
  }

  .app-footer {
    display: none; /* Hide footer on mobile */
  }
}

/* Recurring Tab Layout */
.recurring-tab-layout {
  display: flex;
  flex-direction: column;
  gap: 0;
}

@media (min-width: 1024px) {
  .recurring-tab-layout {
    display: flex;
    flex-direction: row;
    gap: 0;
  }
}

.recurring-tab-content {
  flex: 1;
  min-width: 0;
}

@media (min-width: 1024px) {
  .recurring-tab-content {
    padding-right: 1.5rem;
    border-right: 1px solid var(--monarch-border);
  }
}

/* Stats Sidebar - Desktop */
.stats-sidebar {
  width: 280px;
  flex-shrink: 0;
  padding: 0 1rem 1.5rem 1.5rem;
  position: sticky;
  top: var(--header-height);
  height: fit-content;
  max-height: calc(100vh - var(--header-height));
  overflow-y: auto;
}

.stats-sidebar-content {
  background-color: var(--monarch-bg-card);
  border-radius: 1rem;
  padding: 1.25rem;
  border: 1px solid var(--monarch-border);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

/* Stats Mobile Header */
.stats-mobile-header {
  position: sticky;
  top: var(--header-height);
  z-index: var(--z-index-popover);
}

/* Mobile Responsive */
@media (max-width: 1023px) {
  .dashboard-layout {
    padding: 1rem;
  }
}

@media (max-width: 639px) {
  .dashboard-layout {
    padding: 0.75rem;
  }
}

/* Animation Keyframes */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes toastSlideUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes expandHeight {
  from {
    opacity: 0;
    max-height: 0;
  }
  to {
    opacity: 1;
    max-height: 2000px;
  }
}

@keyframes collapseHeight {
  from {
    opacity: 1;
    max-height: 2000px;
  }
  to {
    opacity: 0;
    max-height: 0;
  }
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-4px);
  }
  75% {
    transform: translateX(4px);
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

@keyframes highlightFade {
  0% {
    background-color: var(--monarch-orange-light);
  }
  100% {
    background-color: transparent;
  }
}

/* Animation Utility Classes */
.animate-fade-in {
  animation: fadeIn 0.2s ease-out forwards;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out forwards;
}

.animate-slide-down {
  animation: slideDown 0.15s ease-out forwards;
}

.animate-slide-up {
  animation: slideUp 0.15s ease-out forwards;
}

.animate-slide-in-right {
  animation: slideInRight 0.25s ease-out forwards;
}

.animate-expand {
  animation: expandHeight 0.3s ease-out forwards;
  overflow: hidden;
}

.animate-collapse {
  animation: collapseHeight 0.2s ease-out forwards;
  overflow: hidden;
}

.animate-shake {
  animation: shake 0.3s ease-in-out;
}

.animate-pulse-subtle {
  animation: pulse 1.5s ease-in-out infinite;
}

.animate-highlight {
  animation: highlightFade 1.5s ease-out forwards;
}

/* Modal Backdrop Animation */
.modal-backdrop {
  animation: fadeIn 0.2s ease-out forwards;
}

.modal-content {
  animation: scaleIn 0.25s ease-out forwards;
}

/* Dropdown Animations */
.dropdown-menu {
  animation: slideDown 0.15s ease-out forwards;
  transform-origin: top;
}

/* Button Hover Effects */
.btn-hover-lift {
  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease;
}

.btn-hover-lift:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.btn-hover-lift:active:not(:disabled) {
  transform: translateY(0);
}

/* Collapsible Arrow Animation */
.collapse-arrow {
  transition: transform 0.2s ease;
}

.collapse-arrow.expanded {
  transform: rotate(90deg);
}

/* ============================================================================
   Stash Widget Grid - react-grid-layout Customizations
   ============================================================================ */

/* Grid container - must take full width for proper measurement */
.stash-widget-grid {
  display: block;
  box-sizing: border-box;
  width: 100%;
  min-width: 100%;
  min-height: 200px;
}

/* Ensure react-grid-layout takes full container width */
.stash-widget-grid .react-grid-layout {
  width: 100% !important;
}

/* Individual grid item */
.stash-grid-item {
  height: 100%;
}

/* Resize handle - bottom right corner only */
/* !important needed to override react-grid-layout library hover styles */
/* L-shaped handle extending along right and bottom edges */
span.react-resizable-handle.react-resizable-handle-se {
  position: absolute;
  width: 80px;
  height: 80px;
  bottom: 0;
  right: 0;
  cursor: se-resize !important;
  opacity: 0 !important;
  transition: opacity 0.2s ease;
  /* Reset default react-resizable styles */
  background: transparent !important;
  border: none !important;
  background-image: none !important;
  /* Create L-shape: 16px thick strips along right and bottom edges */
  clip-path: polygon(
    calc(100% - 16px) 0,
    100% 0,
    100% 100%,
    0 100%,
    0 calc(100% - 16px),
    calc(100% - 16px) calc(100% - 16px)
  );
}

/* Show resize handle only when hovering over the bottom-right corner */
span.react-resizable-handle.react-resizable-handle-se:hover {
  opacity: 1 !important;
}

/* Apple-style resize indicator - SVG arc with rounded stroke caps */
/* Override default react-resizable ::after styling and apply our custom arc */
.stash-widget-grid .react-grid-item > .react-resizable-handle::after {
  content: '' !important;
  position: absolute !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 16px !important;
  height: 16px !important;
  border: none !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath d='M 2 14 A 12 12 0 0 0 14 2' fill='none' stroke='%23fff' stroke-width='3' stroke-linecap='round'/%3E%3C/svg%3E") !important;
  background-size: 16px 16px !important;
  pointer-events: none !important;
}

/* Grab cursor on image banner hover */
.stash-card-image {
  cursor: grab;
}

/* Dragging state */
.react-grid-item.react-draggable-dragging {
  cursor: grabbing;
  opacity: 0.8;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  z-index: 10;
}

/* Grabbing cursor on entire grid while dragging (keeps cursor while moving to drop point) */
.stash-widget-grid:has(.react-draggable-dragging) {
  cursor: grabbing;
}

/* Grabbing cursor propagates to all children while dragging */
.stash-widget-grid:has(.react-draggable-dragging) * {
  cursor: grabbing !important;
}

/* Resizing state */
.react-grid-item.resizing {
  opacity: 0.9;
}

/* Placeholder during drag/resize - !important needed because library CSS loads after index.css */
.react-grid-item.react-grid-placeholder {
  background: var(--monarch-info) !important;
  opacity: 0.2;
  border-radius: 12px;
  transition-duration: 100ms;
  z-index: 2;
}

/* Row Entrance Animation with Stagger */
.row-enter {
  animation: slideUp 0.2s ease-out forwards;
  opacity: 0;
}

/* Stagger delays - applied via inline styles or JS */
.row-enter:nth-child(1) {
  animation-delay: 0ms;
}
.row-enter:nth-child(2) {
  animation-delay: 30ms;
}
.row-enter:nth-child(3) {
  animation-delay: 60ms;
}
.row-enter:nth-child(4) {
  animation-delay: 90ms;
}
.row-enter:nth-child(5) {
  animation-delay: 120ms;
}
.row-enter:nth-child(6) {
  animation-delay: 150ms;
}
.row-enter:nth-child(7) {
  animation-delay: 180ms;
}
.row-enter:nth-child(8) {
  animation-delay: 210ms;
}
.row-enter:nth-child(9) {
  animation-delay: 240ms;
}
.row-enter:nth-child(10) {
  animation-delay: 270ms;
}

/* Loading skeleton shimmer */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--monarch-bg-page) 25%,
    var(--monarch-border-light) 50%,
    var(--monarch-bg-page) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

/* Error message animation */
.error-message {
  animation:
    shake 0.3s ease-in-out,
    fadeIn 0.2s ease-out;
}

/* Progress bar styling for update downloads */
progress {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

progress::-webkit-progress-bar {
  background-color: var(--monarch-border);
  border-radius: 9999px;
}

progress::-webkit-progress-value {
  background-color: var(--monarch-orange);
  border-radius: 9999px;
  transition: width 0.3s ease;
}

progress::-moz-progress-bar {
  background-color: var(--monarch-orange);
  border-radius: 9999px;
}

/* ============================================================================
   Version Indicator (Header)
   ============================================================================ */

.version-indicator {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.5rem;
  background-color: var(--monarch-bg-input);
  border: 1px solid var(--monarch-border);
  border-radius: 9999px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.7rem;
  margin-left: 0.75rem;
}

.version-indicator:hover {
  background-color: var(--monarch-bg-hover);
}

.version-indicator-text {
  color: var(--monarch-text-muted);
  font-family: ui-monospace, monospace;
}

.version-indicator-update {
  color: var(--monarch-orange);
  font-weight: 500;
}

/* Version Indicator Wrapper for tooltip positioning */
.version-indicator-wrapper {
  position: relative;
  display: inline-flex;
}

/* "See what's new" Tooltip */
.version-indicator-tooltip {
  position: absolute;
  top: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--monarch-tooltip-bg);
  color: var(--monarch-tooltip-text);
  font-size: 0.75rem;
  font-weight: 500;
  padding: 0.375rem 0.75rem;
  border-radius: 0.375rem;
  white-space: nowrap;
  z-index: var(--z-index-tooltip);
  animation: tooltipFadeIn 0.3s ease-out forwards;
  box-shadow: var(--monarch-tooltip-shadow);
}

/* Tooltip arrow */
.version-indicator-tooltip::before {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-bottom-color: var(--monarch-tooltip-bg);
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Glowing Orange Orb */
.version-indicator-orb {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--monarch-orange);
  box-shadow:
    0 0 4px var(--monarch-orange),
    0 0 8px var(--monarch-orange),
    0 0 12px rgba(255, 105, 45, 0.5);
  animation: orbGlow 2s ease-in-out infinite;
}

@keyframes orbGlow {
  0%,
  100% {
    box-shadow:
      0 0 4px var(--monarch-orange),
      0 0 8px var(--monarch-orange),
      0 0 12px rgba(255, 105, 45, 0.5);
  }
  50% {
    box-shadow:
      0 0 6px var(--monarch-orange),
      0 0 12px var(--monarch-orange),
      0 0 20px rgba(255, 105, 45, 0.7);
  }
}

/* ============================================================================
   Toast Notifications
   ============================================================================ */

.toast-container {
  position: fixed;
  bottom: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: var(--z-index-toast);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  pointer-events: none;
  max-width: calc(100vw - 2rem);
}

.toast-item {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.15),
    0 2px 4px rgba(0, 0, 0, 0.1);
  animation: toastSlideUp 0.25s ease-out forwards;
  pointer-events: auto;
  font-size: 0.875rem;
  min-width: 200px;
  max-width: 400px;
}

/* Dark mode toast backgrounds - use solid colors for readability */
:root.dark .toast-item[data-type='error'] {
  background-color: var(--monarch-error-bg-solid) !important;
}
:root.dark .toast-item[data-type='success'] {
  background-color: var(--monarch-success-bg-solid) !important;
}
:root.dark .toast-item[data-type='warning'] {
  background-color: var(--monarch-warning-bg-solid) !important;
}
:root.dark .toast-item[data-type='info'] {
  background-color: var(--monarch-info-bg-solid) !important;
}

.toast-message {
  flex: 1;
  line-height: 1.4;
}

.toast-close {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.25rem;
  border-radius: 0.25rem;
  opacity: 0.7;
  transition:
    opacity 0.15s ease,
    background-color 0.15s ease;
  cursor: pointer;
  background: transparent;
  border: none;
}

.toast-close:hover {
  opacity: 1;
  background-color: rgba(0, 0, 0, 0.1);
}

/* Toast slide-up animation for bottom positioning */
@keyframes toastSlideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Mobile responsive toasts */
@media (max-width: 639px) {
  .toast-container {
    bottom: 1rem;
    left: 1rem;
    right: 1rem;
    transform: none;
  }

  .toast-item {
    min-width: 0;
    max-width: none;
  }
}

/* ============================================================================
   Hover Utility Classes
   Reusable hover state classes for common patterns across the app.
   These replace inline onMouseEnter/onMouseLeave handlers.
   ============================================================================ */

/* Background hover transitions */
.hover-bg-transparent-to-hover {
  background-color: transparent;
  transition: background-color 0.15s ease;
}
.hover-bg-transparent-to-hover:hover {
  background-color: var(--monarch-bg-hover);
}

.hover-bg-page-to-hover {
  background-color: var(--monarch-bg-page);
  transition: background-color 0.15s ease;
}
.hover-bg-page-to-hover:hover {
  background-color: var(--monarch-bg-hover);
}

.hover-bg-orange-to-orange-hover {
  background-color: var(--monarch-orange);
  transition: background-color 0.15s ease;
}
.hover-bg-orange-to-orange-hover:hover {
  background-color: var(--monarch-orange-hover);
}

.hover-bg-transparent-to-error-bg {
  background-color: transparent;
  transition: background-color 0.15s ease;
}
.hover-bg-transparent-to-error-bg:hover {
  background-color: var(--monarch-error-bg);
}

.hover-bg-white-alpha-10-to-20 {
  background-color: rgba(255, 255, 255, 0.1);
  transition: background-color 0.15s ease;
}
.hover-bg-white-alpha-10-to-20:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.hover-bg-white-to-gray {
  background-color: white;
  transition: background-color 0.15s ease;
}
.hover-bg-white-to-gray:hover {
  background-color: #f3f4f6;
}

.hover-bg-transparent-to-orange-light {
  background-color: transparent;
  transition: background-color 0.15s ease;
}
.hover-bg-transparent-to-orange-light:hover {
  background-color: rgba(255, 105, 45, 0.1);
}

/* Border hover transitions */
.hover-border-to-orange {
  border-color: var(--monarch-border);
  transition: border-color 0.15s ease;
}
.hover-border-to-orange:hover {
  border-color: var(--monarch-orange);
}

/* Text color hover transitions */
.hover-text-muted-to-dark {
  color: var(--monarch-text-muted);
  transition: color 0.15s ease;
}
.hover-text-muted-to-dark:hover {
  color: var(--monarch-text-dark);
}

/* Opacity hover transitions */
.hover-opacity-80 {
  opacity: 1;
  transition: opacity 0.15s ease;
}
.hover-opacity-80:hover {
  opacity: 0.8;
}

/* Button variant hover classes (respects disabled state) */
.btn-primary-hover {
  background-color: var(--monarch-primary);
  transition: background-color 0.15s ease;
}
.btn-primary-hover:hover:not(:disabled) {
  background-color: var(--monarch-primary-hover);
}

.btn-secondary-hover {
  background-color: var(--monarch-bg-page);
  transition: background-color 0.15s ease;
}
.btn-secondary-hover:hover:not(:disabled) {
  background-color: var(--monarch-bg-hover);
}

.btn-ghost-hover {
  background-color: transparent;
  transition: background-color 0.15s ease;
}
.btn-ghost-hover:hover:not(:disabled) {
  background-color: var(--monarch-bg-hover);
}

.btn-danger-hover {
  background-color: var(--monarch-error);
  transition: background-color 0.15s ease;
}
.btn-danger-hover:hover:not(:disabled) {
  background-color: var(--monarch-error);
}

/* Link icon hover - changes color and background on hover */
.hover-link-icon {
  color: var(--monarch-text-muted);
  background-color: transparent;
  transition:
    color 0.15s ease,
    background-color 0.15s ease;
}
.hover-link-icon:hover {
  color: var(--monarch-orange);
  background-color: rgba(255, 105, 45, 0.1);
}

/* Tool tile hover - border only, no glow */
.hover-tool-tile {
  transition: border-color 0.15s ease;
}
.hover-tool-tile:hover {
  border-color: var(--monarch-orange);
}

/* Settings icon hover - color and background change */
.hover-settings-icon {
  color: var(--monarch-text-muted);
  background-color: transparent;
  transition:
    color 0.15s ease,
    background-color 0.15s ease;
}
.hover-settings-icon:hover {
  color: var(--monarch-text-dark);
  background-color: var(--monarch-bg-page);
}

/* Refresh button hover - bg card to page */
.hover-bg-card-to-page {
  background-color: var(--monarch-bg-card);
  transition: background-color 0.15s ease;
}
.hover-bg-card-to-page:hover {
  background-color: var(--monarch-bg-page);
}

/* Orange button hover - respects disabled state via CSS */
.hover-bg-orange-enabled:not(:disabled) {
  transition: background-color 0.15s ease;
}
.hover-bg-orange-enabled:not(:disabled):hover {
  background-color: var(--monarch-orange-hover);
}

/* Table row hover - card to hover background */
.hover-bg-card-to-hover-row {
  background-color: var(--monarch-bg-card);
  transition: background-color 0.15s ease;
}
.hover-bg-card-to-hover-row:not(.row-highlighted):hover {
  background-color: var(--monarch-bg-hover);
}

/* Item card hover - only when not checked/selected */
.hover-item-card-unchecked:not(.item-card-checked) {
  transition:
    border-color 0.15s ease,
    background-color 0.15s ease;
}
.hover-item-card-unchecked:not(.item-card-checked):hover {
  border-color: var(--monarch-orange);
  background-color: rgba(255, 105, 45, 0.04);
}

/* ============================================================================
   ECLOSION ANIMATION FRAMEWORK
   ============================================================================

   A consistent, accessible animation system for the entire app.
   All animations respect prefers-reduced-motion for accessibility.

   ## Timing Reference (matches constants/index.ts UI.ANIMATION)
   --animation-fast:   150ms - Micro-interactions (buttons, hovers)
   --animation-normal: 200ms - Standard transitions (modals, tabs)
   --animation-slow:   300ms - Emphasis animations (page loads)

   ## Page Transitions
   .tab-content-enter    - Apply to tab panel content wrappers
   .section-enter        - Apply to card sections within pages (auto-staggers)

   ## List Animations
   .list-item-enter      - Apply to list/table rows (auto-staggers up to 15 items)
   .list-item-exit       - Apply when removing items (with JS to trigger)
   .list-item-highlight  - Flash highlight after update

   ## Micro-Interactions
   .btn-press            - Add to buttons for press feedback (scale down on click)
   .btn-hover-lift       - Add to buttons for hover lift effect
   .icon-btn-hover       - Add to icon buttons for scale effect
   .toggle-switch        - Add to toggle switch containers
   .toggle-knob          - Add to toggle switch knobs

   ## Modals & Overlays
   .modal-backdrop       - Fade in for modal overlays
   .modal-content        - Scale in for modal content
   .dropdown-menu        - Slide down for dropdowns

   ## Feedback States
   .animate-error-shake  - Shake animation for errors
   .animate-success      - Pulse animation for success
   .animate-loading      - Subtle pulse for loading states

   ## Utility Classes
   .fade-in, .fade-out   - Basic fade animations
   .slide-up, .slide-down - Slide animations
   .scale-in, .pop-in    - Scale animations (pop-in has bounce)
   .transition-fast/normal/slow - Apply transition durations

   ## Reduced Motion
   All animations automatically reduce for users with
   prefers-reduced-motion: reduce. No additional work needed.

   ============================================================================ */

/* ============================================================================
   Reduced Motion Support (Accessibility)
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Keep skeleton visible but static */
  .skeleton {
    animation: none;
    background: var(--monarch-bg-page);
  }
}

/* ============================================================================
   Page & Tab Transitions
   ============================================================================ */

@keyframes pageEnter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Tab content entrance - apply to tab panel containers */
.tab-content-enter {
  animation: pageEnter var(--animation-normal) var(--ease-out-smooth) forwards;
}

/* Section entrance - for cards/sections within a page */
.section-enter {
  animation: fadeIn var(--animation-normal) var(--ease-out-smooth) forwards;
  animation-delay: 50ms;
  opacity: 0;
}

/* Staggered section entrance */
.section-enter:nth-child(1) {
  animation-delay: 0ms;
}
.section-enter:nth-child(2) {
  animation-delay: 50ms;
}
.section-enter:nth-child(3) {
  animation-delay: 100ms;
}
.section-enter:nth-child(4) {
  animation-delay: 150ms;
}
.section-enter:nth-child(5) {
  animation-delay: 200ms;
}

/* ============================================================================
   Micro-Interactions
   ============================================================================ */

/* Button press effect - subtle scale-down on active */
.btn-press {
  transition:
    transform var(--animation-fast) var(--ease-out-smooth),
    box-shadow var(--animation-fast) var(--ease-out-smooth);
}

.btn-press:active:not(:disabled) {
  transform: scale(0.97);
}

/* Icon button hover - scale effect */
.icon-btn-hover {
  cursor: pointer;
  transition:
    transform var(--animation-fast) var(--ease-out-smooth),
    color var(--animation-fast) var(--ease-out-smooth),
    background-color var(--animation-fast) var(--ease-out-smooth);
}

.icon-btn-hover:hover:not(:disabled) {
  transform: scale(1.05);
}

.icon-btn-hover:active:not(:disabled) {
  transform: scale(0.95);
}

/* Toggle switch - smooth background transition */
.toggle-switch {
  transition: background-color var(--animation-fast) var(--ease-in-out);
}

/* Toggle knob - smooth movement with slight bounce */
.toggle-knob {
  transition: transform var(--animation-fast) var(--ease-out-back);
}

/* Checkbox check animation */
@keyframes checkMark {
  0% {
    stroke-dashoffset: 24;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.checkbox-animate path {
  stroke-dasharray: 24;
  stroke-dashoffset: 24;
}

.checkbox-animate.checked path {
  animation: checkMark var(--animation-fast) var(--ease-out-smooth) forwards;
}

/* ============================================================================
   List Animations
   ============================================================================ */

/* List item entrance */
@keyframes listItemEnter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.list-item-enter {
  animation: listItemEnter var(--animation-normal) var(--ease-out-smooth) forwards;
  opacity: 0;
}

/* Extended stagger support (up to 15 items, then caps) */
.list-item-enter:nth-child(1) {
  animation-delay: calc(0 * var(--stagger-delay));
}
.list-item-enter:nth-child(2) {
  animation-delay: calc(1 * var(--stagger-delay));
}
.list-item-enter:nth-child(3) {
  animation-delay: calc(2 * var(--stagger-delay));
}
.list-item-enter:nth-child(4) {
  animation-delay: calc(3 * var(--stagger-delay));
}
.list-item-enter:nth-child(5) {
  animation-delay: calc(4 * var(--stagger-delay));
}
.list-item-enter:nth-child(6) {
  animation-delay: calc(5 * var(--stagger-delay));
}
.list-item-enter:nth-child(7) {
  animation-delay: calc(6 * var(--stagger-delay));
}
.list-item-enter:nth-child(8) {
  animation-delay: calc(7 * var(--stagger-delay));
}
.list-item-enter:nth-child(9) {
  animation-delay: calc(8 * var(--stagger-delay));
}
.list-item-enter:nth-child(10) {
  animation-delay: calc(9 * var(--stagger-delay));
}
.list-item-enter:nth-child(11) {
  animation-delay: calc(10 * var(--stagger-delay));
}
.list-item-enter:nth-child(12) {
  animation-delay: calc(11 * var(--stagger-delay));
}
.list-item-enter:nth-child(13) {
  animation-delay: calc(12 * var(--stagger-delay));
}
.list-item-enter:nth-child(14) {
  animation-delay: calc(13 * var(--stagger-delay));
}
.list-item-enter:nth-child(15) {
  animation-delay: calc(14 * var(--stagger-delay));
}
/* Cap at 350ms max delay for items 16+ */
.list-item-enter:nth-child(n + 16) {
  animation-delay: 350ms;
}

/* List item removal */
@keyframes listItemExit {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(-20px);
  }
}

.list-item-exit {
  animation: listItemExit var(--animation-normal) var(--ease-out-smooth) forwards;
}

/* List item highlight after action */
.list-item-highlight {
  animation: highlightFade 1.5s ease-out forwards;
}

/* ============================================================================
   Feedback States
   ============================================================================ */

/* Error shake - refined version */
@keyframes errorShake {
  0%,
  100% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(-3px);
  }
  40% {
    transform: translateX(3px);
  }
  60% {
    transform: translateX(-2px);
  }
  80% {
    transform: translateX(2px);
  }
}

.animate-error-shake {
  animation: errorShake 0.4s ease-in-out;
}

/* Success pulse */
@keyframes successPulse {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(34, 160, 107, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(34, 160, 107, 0);
  }
}

.animate-success {
  animation: successPulse 0.6s ease-out;
}

/* Icon pulse - subtle scale animation for attention */
@keyframes iconPulse {
  0%,
  100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.15);
    opacity: 0.85;
  }
}

.animate-icon-pulse {
  animation: iconPulse 2s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-icon-pulse {
    animation: none;
  }
}

/* Loading pulse - subtle */
@keyframes loadingPulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-loading {
  animation: loadingPulse 1.5s ease-in-out infinite;
}

/* ============================================================================
   Utility Animation Classes
   ============================================================================ */

/* Fade utilities */
.fade-in {
  animation: fadeIn var(--animation-fast) ease-out forwards;
}
.fade-in-slow {
  animation: fadeIn var(--animation-slow) ease-out forwards;
}
.fade-out {
  animation: fadeOut var(--animation-fast) ease-out forwards;
}

/* Flip text - smooth transition for alternating text content */
.flip-text {
  transition:
    opacity var(--animation-normal) ease,
    color var(--animation-normal) ease;
}

/* Flip up animation - for alternating between two text values */
.flip-up-container {
  display: flex;
  flex-direction: column;
  transition: transform var(--animation-normal) var(--ease-out-smooth);
}

.flip-up-container.show-to-go {
  transform: translateY(0);
}

.flip-up-container.show-saved {
  transform: translateY(-50%);
}

.flip-up-item {
  height: 1rem;
  line-height: 1rem;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

/* Slide utilities */
.slide-up {
  animation: slideUp var(--animation-fast) ease-out forwards;
}
.slide-down {
  animation: slideDown var(--animation-fast) ease-out forwards;
}

/* Scale utilities */
.scale-in {
  animation: scaleIn var(--animation-fast) ease-out forwards;
}
.pop-in {
  animation: scaleIn var(--animation-fast) var(--ease-out-back) forwards;
}

/* Transition duration utilities */
.transition-fast {
  transition-duration: var(--animation-fast);
}
.transition-normal {
  transition-duration: var(--animation-normal);
}
.transition-slow {
  transition-duration: var(--animation-slow);
}

/* Combined transition utilities for common patterns */
.transition-all-fast {
  transition: all var(--animation-fast) var(--ease-out-smooth);
}

.transition-colors-fast {
  transition:
    color var(--animation-fast) ease,
    background-color var(--animation-fast) ease,
    border-color var(--animation-fast) ease;
}

.transition-transform-fast {
  transition: transform var(--animation-fast) var(--ease-out-smooth);
}

.transition-opacity-fast {
  transition: opacity var(--animation-fast) ease;
}

/* Card/panel entrance - for dynamically loaded content */
.card-enter {
  animation: scaleIn var(--animation-normal) var(--ease-out-smooth) forwards;
}

/* Bouncing down arrow - attention-drawing scroll indicator */
@keyframes bounceDown {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(4px);
  }
}

.animate-bounce-down {
  animation: bounceDown 1s ease-in-out infinite;
}

/* Tooltip entrance - subtle slide from direction */
@keyframes tooltipEnter {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.tooltip-enter {
  animation: tooltipEnter var(--animation-fast) var(--ease-out-smooth) forwards;
}

/* ============================================================================
   Recurring List Responsive Layout
   ============================================================================ */

/* Mobile: Show cards, hide table */
.recurring-table {
  display: none;
}

.recurring-cards {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1rem;
}

/* Frequency group header for card layout */
.recurring-cards-group-header {
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--monarch-text-muted);
  padding: 0.5rem 0;
  margin-top: 0.5rem;
}

.recurring-cards-group-header:first-child {
  margin-top: 0;
}

/* Desktop: Show table, hide cards */
@media (min-width: 1280px) {
  .recurring-table {
    display: table;
    width: 100%;
    table-layout: fixed;
  }

  .recurring-cards {
    display: none;
  }
}

/* ============================================================================
   Marketing Page - Mockup Components
   ============================================================================
   Styles for the landing page live React component mockups.
   Uses CSS transform scaling to render full-size components as screenshots.
   ============================================================================ */

/* Device frame - browser chrome wrapper */
.mockup-device-frame {
  border-radius: 12px;
  border: 1px solid var(--monarch-border);
  background: var(--monarch-bg-card);
  overflow: hidden;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
  width: 100%;
}

.mockup-browser-chrome {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--monarch-border);
  background: var(--monarch-bg-page);
}

.mockup-traffic-lights {
  display: flex;
  gap: 6px;
}

.mockup-traffic-light {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.mockup-traffic-light-red {
  background-color: #ff5f57;
}

.mockup-traffic-light-yellow {
  background-color: #ffbd2e;
}

.mockup-traffic-light-green {
  background-color: #28c840;
}

.mockup-url-bar {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: var(--monarch-bg-card);
  border-radius: 6px;
  font-size: 0.75rem;
  color: var(--monarch-text-muted);
}

/* Content area inside browser chrome */
.mockup-content {
  background: var(--monarch-bg-page);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 1rem;
}

/* Scaled container - maintains visual size after transform */
.mockup-scaled-container {
  overflow: hidden;
  position: relative;
  flex-shrink: 0;
  max-width: 100%;
}

/* Scaled content - renders at full size, then scales down */
.mockup-scaled-content {
  transform-origin: top left;
  pointer-events: none;
}

/* Make mockup content scroll horizontally on very small screens */
@media (max-width: 480px) {
  .mockup-content {
    overflow-x: auto;
    justify-content: flex-start;
  }
}

/* Marketing page section animations */
@keyframes marketingEmerge {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.marketing-section-emerge {
  animation: marketingEmerge 0.6s var(--ease-out-smooth) forwards;
}

@keyframes pulse-glow {
  0%,
  100% {
    transform: scale(1);
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 0 0 0 rgba(255, 105, 45, 0);
  }
  50% {
    transform: scale(1.05);
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 0 20px 4px rgba(255, 105, 45, 0.35);
  }
}

/* Frustration card styling */
.frustration-card {
  background: var(--monarch-bg-card);
  border: 1px solid var(--monarch-border);
  border-radius: 12px;
  padding: 1.25rem;
  transition:
    border-color 0.15s ease,
    box-shadow 0.15s ease,
    width var(--animation-normal) ease-out,
    flex var(--animation-normal) ease-out;
}

.frustration-card:hover {
  border-color: var(--monarch-orange);
  box-shadow: 0 4px 12px rgba(255, 105, 45, 0.08);
}

/* Responsive flex sizing for frustration cards */
.frustration-card-single,
.frustration-card-double,
.frustration-card-full {
  flex: 0 0 100%; /* Mobile: full width */
}

@media (min-width: 768px) {
  /* Desktop: calculated widths based on 3-column grid with 1rem gaps */
  .frustration-card-single {
    flex: 0 0 calc((100% - 2rem) / 3);
  }
  .frustration-card-double {
    flex: 0 0 calc((100% - 2rem) / 3 * 2 + 1rem);
  }
  .frustration-card-full {
    flex: 0 0 100%;
  }
}

/* Spotlight effect for solo CustomProblemCard */
.spotlight-card {
  position: relative;
  animation: spotlightFadeIn var(--animation-normal) ease-out forwards;
}

.spotlight-card::before {
  content: '';
  position: absolute;
  inset: -40px -60px;
  background: radial-gradient(
    ellipse 50% 70% at 50% 30%,
    rgba(255, 105, 45, 0.12) 0%,
    rgba(255, 105, 45, 0.06) 40%,
    transparent 70%
  );
  pointer-events: none;
  z-index: -1;
  animation: spotlightPulse 3s ease-in-out infinite;
}

@keyframes spotlightFadeIn {
  from {
    box-shadow: 0 4px 12px rgba(255, 105, 45, 0);
  }
  to {
    box-shadow: 0 8px 32px rgba(255, 105, 45, 0.15);
  }
}

@keyframes spotlightPulse {
  0%,
  100% {
    opacity: 0.8;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.02);
  }
}

/* Question mark pulse animation */
@keyframes questionPulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
}

.question-mark-pulse {
  display: inline-block;
  animation: questionPulse 2s ease-in-out infinite;
  transform-origin: center;
}

/* Frustration card stacking animation system */

/* Hidden state - invisible and above viewport */
.frustration-hidden {
  opacity: 0;
  transform: translateY(-100px);
}

/* Falling animation - heavy crushing drop */
@keyframes frustrationFall {
  0% {
    opacity: 0;
    transform: translateY(-120px) rotate(-2deg) scale(1.02);
  }
  30% {
    opacity: 1;
  }
  65% {
    transform: translateY(18px) rotate(1deg) scale(0.98);
  }
  80% {
    transform: translateY(-8px) rotate(-0.5deg) scale(1.01);
  }
  90% {
    transform: translateY(4px) rotate(0.25deg);
  }
  100% {
    opacity: 1;
    transform: translateY(0) rotate(0) scale(1);
  }
}

.frustration-falling {
  animation: frustrationFall 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Text scramble effect for bumped cards */
@keyframes textScramble {
  0% {
    filter: blur(0);
    letter-spacing: 0;
  }
  15% {
    filter: blur(1px);
    letter-spacing: 2px;
    transform: skewX(-2deg);
  }
  30% {
    filter: blur(0.5px);
    letter-spacing: -1px;
    transform: skewX(1deg);
  }
  50% {
    filter: blur(0.3px);
    letter-spacing: 1px;
    transform: skewX(-0.5deg);
  }
  70% {
    filter: blur(0);
    letter-spacing: 0.5px;
    transform: skewX(0.3deg);
  }
  100% {
    filter: blur(0);
    letter-spacing: 0;
    transform: skewX(0);
  }
}

/* Bump animation - crushing weight impact */
@keyframes frustrationBump {
  0% {
    transform: translateY(0) translateX(0) scale(1);
  }
  8% {
    transform: translateY(16px) translateX(-5px) rotate(-1.5deg) scale(0.97);
  }
  20% {
    transform: translateY(10px) translateX(4px) rotate(1deg) scale(0.98);
  }
  35% {
    transform: translateY(12px) translateX(-3px) rotate(-0.5deg);
  }
  55% {
    transform: translateY(6px) translateX(2px) rotate(0.3deg);
  }
  75% {
    transform: translateY(3px) translateX(-1px);
  }
  100% {
    transform: translateY(0) translateX(0) rotate(0) scale(1);
  }
}

.frustration-bumped {
  animation: frustrationBump 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.frustration-bumped h3,
.frustration-bumped p {
  animation: textScramble 0.4s ease-out;
}

/* More intense text scramble for harder bumps */
@keyframes textScrambleHard {
  0% {
    filter: blur(0);
    letter-spacing: 0;
  }
  10% {
    filter: blur(1.5px);
    letter-spacing: 3px;
    transform: skewX(-3deg) translateX(-2px);
  }
  25% {
    filter: blur(1px);
    letter-spacing: -2px;
    transform: skewX(2deg) translateX(1px);
  }
  40% {
    filter: blur(0.8px);
    letter-spacing: 2px;
    transform: skewX(-1deg);
  }
  60% {
    filter: blur(0.3px);
    letter-spacing: 0.5px;
    transform: skewX(0.5deg);
  }
  80% {
    filter: blur(0);
    letter-spacing: 0.2px;
  }
  100% {
    filter: blur(0);
    letter-spacing: 0;
    transform: skewX(0) translateX(0);
  }
}

/* More intense bump for cards hit multiple times */
@keyframes frustrationBumpHard {
  0% {
    transform: translateY(0) translateX(0) scale(1);
  }
  6% {
    transform: translateY(22px) translateX(-8px) rotate(-2.5deg) scale(0.95);
  }
  15% {
    transform: translateY(14px) translateX(6px) rotate(1.5deg) scale(0.96);
  }
  28% {
    transform: translateY(18px) translateX(-5px) rotate(-1deg) scale(0.97);
  }
  45% {
    transform: translateY(10px) translateX(3px) rotate(0.5deg);
  }
  65% {
    transform: translateY(5px) translateX(-2px) rotate(-0.3deg);
  }
  85% {
    transform: translateY(2px) translateX(1px);
  }
  100% {
    transform: translateY(0) translateX(0) rotate(0) scale(1);
  }
}

.frustration-bump-2 {
  animation: frustrationBumpHard 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.frustration-bump-2 h3,
.frustration-bump-2 p {
  animation: textScrambleHard 0.45s ease-out;
}

/* Landed state - stable */
.frustration-landed {
  opacity: 1;
  transform: translateY(0);
}

/* Swipe away animation - dismisses card to the right */
@keyframes frustrationSwipeAway {
  0% {
    opacity: 1;
    transform: translateX(0) rotate(0);
  }
  100% {
    opacity: 0;
    transform: translateX(120%) rotate(8deg);
  }
}

.frustration-swipe-away {
  animation: frustrationSwipeAway 0.3s ease-in forwards;
  pointer-events: none;
}

/* Reduced motion: show cards immediately without animation */
@media (prefers-reduced-motion: reduce) {
  .question-mark-pulse {
    animation: none;
  }

  .frustration-hidden,
  .frustration-falling,
  .frustration-bumped,
  .frustration-landed {
    opacity: 1;
    transform: none;
    animation: none;
  }

  .frustration-bumped h3,
  .frustration-bumped p,
  .frustration-bump-2 h3,
  .frustration-bump-2 p {
    animation: none;
    filter: none;
    letter-spacing: normal;
    transform: none;
  }

  .frustration-swipe-away {
    opacity: 0;
    animation: none;
  }
}

/* Social proof bar */
.social-proof-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;
  padding: 1rem 0;
}

.social-proof-stat {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: var(--monarch-text-muted);
}

/* Price explainer trigger */
.price-explainer-trigger {
  color: var(--monarch-orange);
  cursor: pointer;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 2px;
  transition: color 0.15s ease;
}

.price-explainer-trigger:hover {
  color: var(--monarch-orange-hover);
}

/* Price explainer popover */
.price-explainer-popover {
  width: calc(100vw - 32px);
  max-width: 320px;
  padding: 1.25rem;
  background: var(--monarch-bg-card);
  border: 1px solid var(--monarch-border);
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  z-index: var(--z-index-popover);
}

@media (min-width: 640px) {
  .price-explainer-popover {
    width: auto;
    max-width: 400px;
  }
}

.price-explainer-popover h3 {
  font-size: 1rem;
  font-weight: 600;
  color: var(--monarch-text-dark);
  margin-bottom: 0.75rem;
}

.price-explainer-popover p {
  font-size: 0.875rem;
  color: var(--monarch-text-muted);
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.price-explainer-popover ul {
  list-style: none;
  padding: 0;
  margin: 0.75rem 0;
}

.price-explainer-popover li {
  font-size: 0.875rem;
  color: var(--monarch-text-dark);
  padding: 0.25rem 0;
  padding-left: 1.25rem;
  position: relative;
}

.price-explainer-popover li::before {
  content: '';
  position: absolute;
  left: 0;
  color: var(--monarch-orange);
}

.price-explainer-popover .tip {
  font-style: italic;
  font-size: 0.8125rem;
  color: var(--monarch-text-muted);
  padding-top: 0.75rem;
  border-top: 1px solid var(--monarch-border);
  margin-top: 0.75rem;
}

/* ============================================================================
   Ideas Board Animations
   ============================================================================ */

/* Idea bubble pop-in from left - contained within parent bounds */
@keyframes ideaPopInLeft {
  0% {
    opacity: 0;
    transform: translateX(-30px) rotate(-8deg) scale(0.95);
  }
  60% {
    opacity: 1;
    transform: translateX(6px) rotate(2deg) scale(1.02);
  }
  80% {
    transform: translateX(-3px) rotate(-1deg) scale(1);
  }
  100% {
    opacity: 1;
    transform: translateX(0) rotate(0deg) scale(1);
  }
}

/* Idea bubble pop-in from right - contained within parent bounds */
@keyframes ideaPopInRight {
  0% {
    opacity: 0;
    transform: translateX(30px) rotate(8deg) scale(0.95);
  }
  60% {
    opacity: 1;
    transform: translateX(-6px) rotate(-2deg) scale(1.02);
  }
  80% {
    transform: translateX(3px) rotate(1deg) scale(1);
  }
  100% {
    opacity: 1;
    transform: translateX(0) rotate(0deg) scale(1);
  }
}

.idea-pop-in-left {
  animation: ideaPopInLeft 0.5s var(--ease-out-smooth) forwards;
}

.idea-pop-in-right {
  animation: ideaPopInRight 0.5s var(--ease-out-smooth) forwards;
}

/* Idea card morph-to-dev animation - poppy scale + glow */
@keyframes ideaMorphToDev {
  0% {
    transform: scale(1) rotate(0deg);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
  30% {
    transform: scale(1.08) rotate(0deg);
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);
  }
  60% {
    transform: scale(0.95) rotate(0deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
}

.idea-morph-to-dev {
  animation: ideaMorphToDev 0.6s var(--ease-out-smooth) forwards;
  border-color: var(--monarch-info) !important;
  border-width: 2px !important;
}

/* Bottom cards fade out during morph */
@keyframes ideaMorphOut {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
}

.idea-morph-out {
  animation: ideaMorphOut 0.4s ease-out forwards;
}

/* Card fades out when a new card lands on top of it */
@keyframes ideaStackedOn {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0.35;
  }
}

.idea-stacked-on {
  animation: ideaStackedOn 0.4s ease-out forwards;
}

/* Morph element animations - for elements appearing/disappearing during card morph */
@keyframes morphElementIn {
  0% {
    opacity: 0;
    transform: translateY(-8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes morphElementOut {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(8px);
  }
}

.morph-element-in {
  animation: morphElementIn 0.4s ease-out forwards;
}

.morph-element-out {
  animation: morphElementOut 0.3s ease-out forwards;
}

/* Developer avatar pop-in animation */
@keyframes devAvatarPopIn {
  0% {
    opacity: 0;
    transform: scale(0) translateY(10px);
  }
  60% {
    opacity: 1;
    transform: scale(1.2) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.dev-avatar-pop-in {
  animation: devAvatarPopIn 0.35s var(--ease-out-smooth) forwards;
  animation-fill-mode: both;
}

/* Dev card entrance animation */
@keyframes devCardEnter {
  0% {
    opacity: 0;
    transform: scale(0.95);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.dev-card-enter {
  animation: devCardEnter 0.3s ease-out forwards;
}

/* Upvote bounce animation */
@keyframes upvoteBounce {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.3);
  }
}

.upvote-bounce {
  animation: upvoteBounce 0.3s ease-out;
}

/* Vote counter roll animation */
@keyframes voteCountRoll {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

.vote-count-roll {
  animation: voteCountRoll 0.3s ease-out forwards;
}

/* Dev cycle stage slide animation */
@keyframes stageSlideOut {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-30px);
  }
}

@keyframes stageSlideIn {
  0% {
    opacity: 0;
    transform: translateX(30px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.stage-slide-out {
  animation: stageSlideOut 0.3s ease-in forwards;
}

.stage-slide-in {
  animation: stageSlideIn 0.3s ease-out forwards;
}

/* Typewriter cursor blink */
@keyframes cursorBlink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

.typewriter-cursor {
  animation: cursorBlink 0.8s step-end infinite;
}

/* Idea bubble exit animation */
@keyframes ideaPopOut {
  0% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  100% {
    opacity: 0;
    transform: scale(0.8) translateY(-20px);
  }
}

.idea-pop-out {
  animation: ideaPopOut 0.3s ease-in forwards;
}

/* Ship celebration animation */
@keyframes shipCelebrate {
  0% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.15) rotate(-3deg);
  }
  50% {
    transform: scale(1.15) rotate(3deg);
  }
  75% {
    transform: scale(1.1) rotate(-2deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}

.ship-celebrate {
  animation: shipCelebrate 0.5s ease-out;
}

/* Progress bar fill animation */
@keyframes progressFill {
  0% {
    width: 0%;
  }
  100% {
    width: 100%;
  }
}

.progress-fill {
  animation: progressFill 1.5s ease-out forwards;
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .idea-pop-in-left,
  .idea-pop-in-right,
  .idea-pop-out,
  .idea-morph-to-dev,
  .idea-morph-out,
  .idea-stacked-on,
  .morph-element-in,
  .morph-element-out,
  .dev-avatar-pop-in,
  .dev-card-enter,
  .upvote-bounce,
  .vote-count-roll,
  .stage-slide-out,
  .stage-slide-in,
  .ship-celebrate,
  .progress-fill {
    animation: none;
  }

  .typewriter-cursor {
    animation: none;
    opacity: 1;
  }
}

/* ============================================================================
   MDXEditor Note Editor
   ============================================================================
   Styling for the NoteEditorMDX component using @mdxeditor/editor.
   Provides dark mode compatible theming and Monarch design system integration.
   ============================================================================ */

.note-editor-mdx {
  border-radius: 6px;
  overflow: hidden;
}

.note-editor-mdx .mdxeditor {
  --font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
  font-family: inherit;
  background: transparent;
}

/* Override MDXEditor's default light theme colors */
.note-editor-mdx .mdxeditor,
.note-editor-mdx .mdxeditor * {
  --accentColor: var(--monarch-orange);
  --accentColorHover: var(--monarch-orange);
}

/* Toolbar styling - dark mode compatible */
.note-editor-mdx .mdxeditor-toolbar {
  background: var(--monarch-bg-hover) !important;
  border-bottom: 1px solid var(--monarch-border) !important;
  padding: 6px 8px !important;
  gap: 4px;
  flex-wrap: wrap !important;
  overflow-x: auto !important;
  scrollbar-width: thin;
}

/* Hide toolbar when editor is not focused (performance optimization) */
.note-editor-mdx:not(.is-focused) .mdxeditor-toolbar {
  display: none;
}

.note-editor-mdx .mdxeditor-toolbar::-webkit-scrollbar {
  height: 4px;
}

.note-editor-mdx .mdxeditor-toolbar::-webkit-scrollbar-thumb {
  background: var(--monarch-border);
  border-radius: 2px;
}

.note-editor-mdx .mdxeditor-toolbar button,
.note-editor-mdx .mdxeditor-toolbar [role='button'] {
  color: var(--monarch-text-dark, #e5e5e5) !important;
  background: transparent !important;
  border-radius: 4px;
  padding: 4px 8px;
}

.note-editor-mdx .mdxeditor-toolbar button svg,
.note-editor-mdx .mdxeditor-toolbar [role='button'] svg {
  color: inherit !important;
  fill: currentColor !important;
}

.note-editor-mdx .mdxeditor-toolbar button:hover,
.note-editor-mdx .mdxeditor-toolbar [role='button']:hover {
  background: var(--monarch-bg-card, #2a2a2a) !important;
  color: var(--monarch-orange, #e07f4f) !important;
}

.note-editor-mdx .mdxeditor-toolbar button[data-state='on'],
.note-editor-mdx .mdxeditor-toolbar [data-state='on'] {
  background: var(--monarch-orange, #e07f4f) !important;
  color: white !important;
}

/* Select/dropdown trigger styling */
.note-editor-mdx .mdxeditor-toolbar select,
.note-editor-mdx .mdxeditor-toolbar [role='combobox'],
.note-editor-mdx .mdxeditor-toolbar button[aria-haspopup='listbox'],
.note-editor-mdx ._selectTrigger_uazmk_182,
.note-editor-mdx [class*='selectTrigger'] {
  background: var(--monarch-bg-card) !important;
  color: var(--monarch-text-dark) !important;
  border: 1px solid var(--monarch-border) !important;
  border-radius: 4px !important;
  padding: 4px 12px !important;
  font-size: 13px !important;
}

/* Dropdown content - global since MDXEditor portals outside the component */
[data-radix-popper-content-wrapper] {
  z-index: 99999 !important;
}

[data-radix-popper-content-wrapper] > div,
[data-radix-popper-content-wrapper] [role='listbox'] {
  background: var(--monarch-bg-card, #1a1a1a) !important;
  border: 1px solid var(--monarch-border, #333) !important;
  border-radius: 6px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
  overflow: hidden;
}

[data-radix-popper-content-wrapper] [role='option'],
[data-radix-popper-content-wrapper] button,
[data-radix-popper-content-wrapper] [class*='Item'] {
  color: var(--monarch-text-dark, #e5e5e5) !important;
  background: transparent !important;
  padding: 8px 12px !important;
  cursor: pointer;
}

[data-radix-popper-content-wrapper] [role='option']:hover,
[data-radix-popper-content-wrapper] [data-highlighted='true'],
[data-radix-popper-content-wrapper] [data-state='checked'],
[data-radix-popper-content-wrapper] button:hover {
  background: var(--monarch-bg-hover, #2a2a2a) !important;
}

/* Override for Tooltips and HoverCards - use tooltip-specific styling */
[data-radix-popper-content-wrapper] > [data-side][data-align] {
  background: var(--monarch-tooltip-bg) !important;
  color: var(--monarch-tooltip-text) !important;
  border: none !important;
  box-shadow: var(--monarch-tooltip-shadow) !important;
}

/* Editor content area - uses CSS custom property for dynamic min-height */
.note-editor-mdx .mdxeditor [data-lexical-editor='true'] {
  min-height: var(--note-editor-min-height, 120px);
  padding: 12px;
  outline: none;
}

.note-editor-mdx .mdx-editor-content {
  color: var(--monarch-text-dark);
  font-size: 14px;
  line-height: 1.6;
}

.note-editor-mdx .mdx-editor-content h1,
.note-editor-mdx .mdx-editor-content h2,
.note-editor-mdx .mdx-editor-content h3,
.note-editor-mdx .mdx-editor-content h4,
.note-editor-mdx .mdx-editor-content h5,
.note-editor-mdx .mdx-editor-content h6 {
  color: var(--monarch-text-dark);
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
}

.note-editor-mdx .mdx-editor-content > h1:first-child,
.note-editor-mdx .mdx-editor-content > h2:first-child,
.note-editor-mdx .mdx-editor-content > h3:first-child,
.note-editor-mdx .mdx-editor-content > h4:first-child,
.note-editor-mdx .mdx-editor-content > h5:first-child,
.note-editor-mdx .mdx-editor-content > h6:first-child {
  margin-top: 0;
}

.note-editor-mdx .mdx-editor-content h1 {
  font-size: 1.5em;
}
.note-editor-mdx .mdx-editor-content h2 {
  font-size: 1.3em;
}
.note-editor-mdx .mdx-editor-content h3 {
  font-size: 1.1em;
}

.note-editor-mdx .mdx-editor-content p {
  margin: 0.5em 0;
}

.note-editor-mdx .mdx-editor-content ul,
.note-editor-mdx .mdx-editor-content ol {
  padding-left: 1.5em;
  margin: 0.5em 0;
}

.note-editor-mdx .mdx-editor-content ul {
  list-style-type: disc;
}

.note-editor-mdx .mdx-editor-content ol {
  list-style-type: decimal;
}

.note-editor-mdx .mdx-editor-content li {
  margin: 0.25em 0;
}

/* Task list / checkbox styling */
.note-editor-mdx .mdx-editor-content li[data-checked='true'],
.note-editor-mdx .mdx-editor-content li[data-checked='false'] {
  list-style: none;
  margin-left: -1.5em;
  padding-left: 0;
}

.note-editor-mdx .mdx-editor-content li[data-checked] input[type='checkbox'] {
  margin-right: 0.5em;
  accent-color: var(--monarch-orange);
  width: 16px;
  height: 16px;
  vertical-align: middle;
  cursor: pointer;
}

.note-editor-mdx .mdx-editor-content li[data-checked='true'] {
  color: var(--monarch-text-muted);
  text-decoration: line-through;
}

.note-editor-mdx .mdx-editor-content blockquote {
  border-left: 3px solid var(--monarch-orange);
  margin: 0.5em 0;
  padding-left: 1em;
  color: var(--monarch-text-muted);
}

.note-editor-mdx .mdx-editor-content code {
  background: var(--monarch-bg-hover);
  padding: 0.15em 0.4em;
  border-radius: 3px;
  font-family: var(--font-mono);
  font-size: 0.9em;
}

.note-editor-mdx .mdx-editor-content a {
  color: var(--monarch-orange);
  text-decoration: none;
}

.note-editor-mdx .mdx-editor-content a:hover {
  text-decoration: underline;
}

.note-editor-mdx .mdx-editor-content hr {
  border: none;
  border-top: 1px solid var(--monarch-border);
  margin: 1em 0;
}

.note-editor-mdx .mdx-editor-content strong {
  font-weight: 600;
}

.note-editor-mdx .mdx-editor-content em {
  font-style: italic;
}

/* Placeholder styling - multiple selectors for Lexical/MDXEditor compatibility */
.note-editor-mdx .mdxeditor [data-lexical-editor='true']:empty::before {
  content: attr(data-placeholder);
  color: var(--monarch-text-muted);
  pointer-events: none;
  position: absolute;
}

/* Lexical placeholder element - uses absolute positioning inside the editor */
.note-editor-mdx .mdxeditor [class*='placeholder'],
.note-editor-mdx .mdxeditor p.PlaygroundEditorTheme__paragraph:only-child:empty::before,
.note-editor-mdx .mdxeditor [data-lexical-placeholder],
.note-editor-mdx .mdxeditor .editor-placeholder,
.note-editor-mdx .mdxeditor .ContentEditable__placeholder,
.note-editor-mdx p[data-placeholder]:empty::before {
  color: var(--monarch-text-muted) !important;
  opacity: 1;
}

/* MDXEditor's internal placeholder class (hashed module class) */
.note-editor-mdx [class*='_placeholder_'] {
  color: var(--monarch-text-muted) !important;
}

/* Read-only mode */
.note-editor-mdx[data-readonly='true'] .mdxeditor [data-lexical-editor='true'] {
  cursor: default;
}

/* Link dialog styling */
.note-editor-mdx .mdxeditor-popup-container,
.mdxeditor-popup-container {
  background: var(--monarch-bg-card) !important;
  border: 1px solid var(--monarch-border) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

.note-editor-mdx .mdxeditor-popup-container input,
.mdxeditor-popup-container input {
  background: var(--monarch-bg-hover) !important;
  border: 1px solid var(--monarch-border) !important;
  border-radius: 4px !important;
  color: var(--monarch-text-dark) !important;
  padding: 6px 10px !important;
}

.note-editor-mdx .mdxeditor-popup-container button,
.mdxeditor-popup-container button {
  background: var(--monarch-orange) !important;
  color: white !important;
  border-radius: 4px !important;
  padding: 6px 12px !important;
}

/* Tooltip styling */
.mdxeditor-toolbar [data-state='delayed-open'] + [role='tooltip'],
[role='tooltip'] {
  background: var(--monarch-bg-card) !important;
  color: var(--monarch-text-dark) !important;
  border: 1px solid var(--monarch-border) !important;
  border-radius: 4px !important;
  padding: 4px 8px !important;
  font-size: 12px !important;
}

/* Math suggestion - Gmail-style inline ghost text */
.note-editor-math-ghost {
  position: absolute;
  bottom: 12px;
  right: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  pointer-events: none;
  z-index: var(--z-index-dropdown);
}

.note-editor-math-ghost-text {
  font-size: 14px;
  line-height: 1.6;
  color: var(--monarch-text-muted);
  opacity: 0.6;
  font-family: inherit;
}

.note-editor-math-ghost-hint {
  font-size: 10px;
  padding: 2px 5px;
  border-radius: 3px;
  background-color: var(--monarch-bg-hover);
  color: var(--monarch-text-muted);
  opacity: 0.7;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ============================================================================
   Release Notes Modal Content
   ============================================================================
   Styles for HTML content from GitHub release notes displayed in modals.
   The HTML comes directly from GitHub and needs styling to match our theme.
   ============================================================================ */

.release-notes-content h2 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--monarch-text-dark);
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

.release-notes-content h2:first-child {
  margin-top: 0;
}

.release-notes-content h3 {
  font-size: 1rem;
  font-weight: 600;
  color: var(--monarch-text-dark);
  margin-top: 0.75rem;
  margin-bottom: 0.375rem;
}

.release-notes-content h4 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--monarch-text-dark);
  margin-top: 0.5rem;
  margin-bottom: 0.25rem;
}

.release-notes-content p {
  margin-bottom: 0.75rem;
  color: var(--monarch-text);
}

.release-notes-content ul {
  list-style-type: disc;
  padding-left: 1.25rem;
  margin-bottom: 0.75rem;
}

.release-notes-content li {
  margin-bottom: 0.25rem;
  color: var(--monarch-text);
}

.release-notes-content a {
  color: var(--monarch-orange);
  text-decoration: none;
}

.release-notes-content a:hover {
  text-decoration: underline;
}

.release-notes-content code {
  background-color: var(--monarch-bg-hover);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.release-notes-content pre {
  background-color: var(--monarch-bg-hover);
  padding: 0.75rem 1rem;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin-bottom: 0.75rem;
}

.release-notes-content pre code {
  background-color: transparent;
  padding: 0;
}

.release-notes-content hr {
  border: none;
  border-top: 1px solid var(--monarch-border);
  margin: 1rem 0;
}

.release-notes-content strong {
  font-weight: 600;
  color: var(--monarch-text-dark);
}

/* ================================================
   Modern Range Slider Styles
   ================================================ */

/* Base slider - hide default track appearance */
.slider-modern {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
}

/* Webkit (Chrome, Safari, Edge) thumb styling */
.slider-modern::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: white;
  border: 2px solid var(--monarch-primary);
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease;
  margin-top: -4px; /* Center thumb on track */
}

.slider-modern::-webkit-slider-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}

.slider-modern::-webkit-slider-thumb:active {
  transform: scale(1.15);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
}

/* Firefox thumb styling */
.slider-modern::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: white;
  border: 2px solid var(--monarch-primary);
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease;
}

.slider-modern::-moz-range-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}

.slider-modern::-moz-range-thumb:active {
  transform: scale(1.15);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
}

/* Hide default track - we use custom divs for the track */
.slider-modern::-webkit-slider-runnable-track {
  height: 8px;
  background: transparent;
}

.slider-modern::-moz-range-track {
  height: 8px;
  background: transparent;
}

/* Focus styles for accessibility */
.slider-modern:focus-visible {
  outline: none;
}

.slider-modern:focus-visible::-webkit-slider-thumb {
  outline: 2px solid var(--monarch-primary);
  outline-offset: 2px;
  box-shadow:
    0 0 0 4px rgba(255, 105, 45, 0.2),
    0 2px 6px rgba(0, 0, 0, 0.15);
}

.slider-modern:focus-visible::-moz-range-thumb {
  outline: 2px solid var(--monarch-primary);
  outline-offset: 2px;
  box-shadow:
    0 0 0 4px rgba(255, 105, 45, 0.2),
    0 2px 6px rgba(0, 0, 0, 0.15);
}

/* Dark mode adjustments for slider thumb */
.dark .slider-modern::-webkit-slider-thumb {
  background: var(--monarch-bg-card);
  border-color: var(--monarch-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.dark .slider-modern::-moz-range-thumb {
  background: var(--monarch-bg-card);
  border-color: var(--monarch-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}
